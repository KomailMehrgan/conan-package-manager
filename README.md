# Project: C++ with OpenCV and OpenVINO on Windows using Conan

This guide provides a complete and reliable walkthrough for building a C++ project that integrates both the **OpenCV** and **Intel OpenVINOâ„¢** libraries. The entire process is managed using the **Conan C++ Package Manager** and **CMake** for a modern, reproducible build environment on Windows.

This document consolidates the solutions to several common issues discovered during setup, including C++ standard conflicts, linker errors (`LNK2019`), and runtime "missing DLL" errors.

## Prerequisites

Before you begin, ensure you have the following tools installed and accessible from your terminal:

1.  **C++ Compiler:** A recent version of the Visual Studio C++ toolchain (the "Desktop development with C++" workload from the Visual Studio Installer is recommended).
2.  **CMake:** Version 3.21 or newer.
3.  **Conan:** Version 2.x.

You can verify your installations by running `cl`, `cmake --version`, and `conan --version` in a terminal.

---

## Step 1: Project Files

Your project should have the following three files in its root directory.

### 1. `conanfile.txt`

This file defines all the project's dependencies. It is configured to handle the specific requirements of both OpenCV and OpenVINO.

```txt
[requires]
opencv/4.11.0
xz_utils/5.4.5
openvino/2025.2.0

[generators]
CMakeDeps
CMakeToolchain

[layout]
cmake_layout

[options]
# This is crucial: it forces Conan to use a shared library for xz_utils,
# which resolves common linker errors with OpenCV on Windows.
xz_utils/*:shared=True
```

### 2. `CMakeLists.txt`

This build script tells CMake how to find all the libraries provided by Conan and link them together to build the final executable.

```cmake
cmake_minimum_required(VERSION 3.21)
project(manageAI CXX)

# Set a C++ standard that is compatible with OpenVINO's dependencies.
set(CMAKE_CXX_STANDARD 17)
set(CMAKE_CXX_STANDARD_REQUIRED ON)

# Find all the required packages provided by Conan
find_package(OpenVINO REQUIRED)
find_package(OpenCV REQUIRED)

# Add our executable program
add_executable(main main.cpp)

# Link our program against all the necessary libraries.
# This includes OpenCV, OpenVINO, and the manually specified LibLZMA
# to resolve the linker errors from OpenCV's tiff dependency.
target_link_libraries(
    main
    PRIVATE
    openvino::openvino
    opencv::opencv
    LibLZMA::LibLZMA
)
```

### 3. `main.cpp`

This program demonstrates that both libraries are working together. It uses OpenVINO to get system information and OpenCV to create and display a simple image.

```cpp
#include <iostream>
#include <vector>
#include <opencv2/opencv.hpp>
#include <openvino/openvino.hpp>

int main() {
    // --- OpenVINO Demonstration ---
    try {
        ov::Core core;
        std::cout << "OpenVINO version: " << core.get_versions("CPU").at("CPU") << std::endl;

        std::vector<std::string> devices = core.get_available_devices();
        std::cout << "Available OpenVINO devices:" << std::endl;
        for (const auto& device : devices) {
            std::cout << "  - " << device << std::endl;
        }
    } catch (const std::exception& e) {
        std::cerr << "OpenVINO Exception: " << e.what() << std::endl;
    }

    std::cout << "\n--- OpenCV Demonstration ---" << std::endl;
    std::cout << "OpenCV version: " << CV_VERSION << std::endl;

    // --- OpenCV Demonstration ---
    cv::Mat image = cv::Mat::zeros(400, 400, CV_8UC3);
    cv::circle(image, cv::Point(200, 200), 100, cv::Scalar(0, 255, 0), -1);
    cv::imshow("OpenCV + OpenVINO Demo", image);

    std::cout << "\nPress any key in the image window to exit." << std::endl;
    cv::waitKey(0);

    return 0;
}
```

---

## Step 2: Build the Project

Open a terminal (PowerShell or CMD) in your project's root folder and run these commands in order.

### 1. Install Dependencies

This is the most critical command. We override the default C++ standard to C++17 to satisfy OpenVINO's requirements.

```powershell
conan install . --build=missing -s compiler.cppstd=17
```

### 2. Configure the Project

This command runs CMake to prepare the build system using the presets generated by Conan.

```powershell
cmake --preset conan-default
```

### 3. Compile the Program

This command compiles `main.cpp` and links all libraries to create `main.exe`.

```powershell
cmake --build --preset conan-release
```

Your executable will now be located at `build\Release\main.exe`.

---

## Step 3: Run the Application

To run the program, you must first resolve the "missing DLL" errors by copying all required shared libraries into the same directory as your executable.

### 1. Copy the Required DLLs

* **Your Executable's Location:** `build\Release\`

* **DLLs to Copy from the Conan Cache (`C:\Users\YourUser\.conan2\p\`)**:
    1.  **OpenVINO DLLs:** From the `openv...<hash>...\p\bin\` folder.
    2.  **OpenCV DLLs:** From the `openc...<hash>...\p\bin\` folder.
    3.  **TBB DLL (`tbb12.dll`):** From the `onetb...<hash>...\p\bin\` folder.
    4.  **LZMA DLL (`liblzma.dll`):** From the `xz_ut...<hash>...\p\bin\` folder.
    5.  **Other Dependencies:** If you encounter more missing DLL errors, find the corresponding package in the Conan cache and copy its DLLs from its `bin` folder.
    6.  in this repo i have put tbb12.dll and libzma.dll 

    
Paste all these DLLs into the `build\Release\` folder alongside `main.exe`.

### 2. Run the Program

Now, you can run your program from the terminal:

```powershell
.\build\Release\main.exe
```

The terminal will display the version information for both libraries, and a window with a green circle will appear. Congratulations, your combined AI and computer vision project is running!
